{% extends "base.html" %}

{% block title %}Stock Prediction{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/predict.css') }}">

<div class="prediction-container">
    <h1>Stock Market Prediction</h1>
    <p class="subtitle">Select a model and stock ticker to generate predictions</p>

    <div class="prediction-form">
        <div class="form-group">
            <label for="model-select">Select ML Model:</label>
            <select id="model-select" name="model">
                <option value="">-- Choose a Model --</option>
                <option value="lstm">LSTM Neural Network</option>
                <option value="random_forest">Random Forest</option>
                <option value="linear_regression">Linear Regression</option>
                <option value="arima">ARIMA</option>
                <option value="prophet">Prophet</option>
            </select>
        </div>

        <div class="form-group">
            <label for="ticker-input">Stock Ticker Symbol:</label>
            <input type="text" id="ticker-input" name="ticker" placeholder="e.g., AAPL, GOOGL, TSLA" />
        </div>

        <div class="form-group">
            <label for="days-input">Prediction Period (days):</label>
            <input type="number" id="days-input" name="days" value="7" min="1" max="30" />
        </div>

        <button class="predict-btn" id="predict-btn">Generate Prediction</button>

        <div class="error-message" id="error-message"></div>
    </div>

    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Running prediction model...</p>
    </div>

    <div class="results-section" id="results-section">
        <h2 id="results-title">Prediction Results</h2>
        
        <div class="summary-stats" id="summary-stats">
            <!-- Summary stats will be inserted here -->
        </div>

        <div class="chart-container">
            <canvas id="prediction-chart"></canvas>
        </div>

        <h3>Daily Predictions</h3>
        <table class="predictions-table" id="predictions-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Predicted Price</th>
                    <th>Change</th>
                    <th>% Change</th>
                </tr>
            </thead>
            <tbody id="predictions-tbody">
                <!-- Table rows will be inserted here -->
            </tbody>
        </table>

        <div class="disclaimer">
            <strong>⚠️ Disclaimer:</strong> This is for educational purposes only. Do not make investment decisions based on these predictions. Past performance does not guarantee future results.
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script src="{{ url_for('static', filename='js/predict.js') }}"></script>
{% endblock %}